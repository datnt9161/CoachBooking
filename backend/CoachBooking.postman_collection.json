{
  "info": {
    "name": "CoachBooking API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {"key": "baseUrl", "value": "http://localhost:8080/api"},
    {"key": "token", "value": ""},
    {"key": "adminToken", "value": ""}
  ],
  "item": [
    {
      "name": "1. Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/auth/register",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Nguyen Van A\",\n  \"email\": \"nguyenvana@gmail.com\",\n  \"phone\": \"0987654321\",\n  \"password\": \"123456\"\n}"
            }
          }
        },
        {
          "name": "Login Customer",
          "event": [{"listen": "test", "script": {"exec": ["var json = pm.response.json();", "pm.collectionVariables.set('token', json.token);"]}}],
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/auth/login",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emailOrPhone\": \"test@example.com\",\n  \"password\": \"123456\"\n}"
            }
          }
        },
        {
          "name": "Login Admin",
          "event": [{"listen": "test", "script": {"exec": ["var json = pm.response.json();", "pm.collectionVariables.set('adminToken', json.token);"]}}],
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/auth/login",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emailOrPhone\": \"admin@coachbooking.com\",\n  \"password\": \"admin123\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "2. User Profile",
      "item": [
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/users/me",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}]
          }
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "url": "{{baseUrl}}/users/me",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}, {"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Test User Updated\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "3. Search Trips",
      "item": [
        {
          "name": "Search Basic",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/trips/search",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"departure\": \"Hà Nội\",\n  \"destination\": \"Đà Nẵng\",\n  \"departureDate\": \"2024-12-15\"\n}"
            }
          }
        },
        {
          "name": "Search with Filters",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/trips/search",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"departure\": \"Hà Nội\",\n  \"destination\": \"Đà Nẵng\",\n  \"departureDate\": \"2024-12-15\",\n  \"coachType\": \"VIP\",\n  \"timeOfDay\": \"MORNING\",\n  \"sortBy\": \"PRICE_ASC\"\n}"
            }
          }
        },
        {
          "name": "Get Trip Detail",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/trips/1"
          }
        }
      ]
    },
    {
      "name": "4. Routes",
      "item": [
        {
          "name": "Get All Routes",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/routes"
          }
        }
      ]
    },
    {
      "name": "5. Seats",
      "item": [
        {
          "name": "Get Seats by Trip",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/seats/trip/1",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}]
          }
        },
        {
          "name": "Get Available Seats",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/seats/trip/1/available",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}]
          }
        }
      ]
    },
    {
      "name": "6. Booking",
      "item": [
        {
          "name": "Create Booking",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/bookings",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}, {"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tripId\": 1,\n  \"seatIds\": [1, 2]\n}"
            }
          }
        },
        {
          "name": "Get My Bookings",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/bookings",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}]
          }
        },
        {
          "name": "Get Booking Detail",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/bookings/1",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}]
          }
        }
      ]
    },
    {
      "name": "7. Payment",
      "item": [
        {
          "name": "Process Payment",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/bookings/payment",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}, {"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"bookingId\": 1,\n  \"paymentMethod\": \"MOMO\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "8. Cancel Ticket",
      "item": [
        {
          "name": "Cancel Booking",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrl}}/bookings/1",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}]
          }
        }
      ]
    },
    {
      "name": "9. Admin - Routes",
      "item": [
        {
          "name": "Get All Routes",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/admin/routes",
            "header": [{"key": "Authorization", "value": "Bearer {{adminToken}}"}]
          }
        },
        {
          "name": "Create Route",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/admin/routes",
            "header": [{"key": "Authorization", "value": "Bearer {{adminToken}}"}, {"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"departure\": \"Hà Nội\",\n  \"destination\": \"Hải Phòng\",\n  \"distance\": 120.5,\n  \"estimatedDuration\": 150\n}"
            }
          }
        },
        {
          "name": "Update Route",
          "request": {
            "method": "PUT",
            "url": "{{baseUrl}}/admin/routes/4",
            "header": [{"key": "Authorization", "value": "Bearer {{adminToken}}"}, {"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"departure\": \"Hà Nội\",\n  \"destination\": \"Hải Phòng\",\n  \"distance\": 125.0,\n  \"estimatedDuration\": 140\n}"
            }
          }
        },
        {
          "name": "Delete Route",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrl}}/admin/routes/4",
            "header": [{"key": "Authorization", "value": "Bearer {{adminToken}}"}]
          }
        }
      ]
    },
    {
      "name": "10. Admin - Coaches",
      "item": [
        {
          "name": "Get All Coaches",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/admin/coaches",
            "header": [{"key": "Authorization", "value": "Bearer {{adminToken}}"}]
          }
        },
        {
          "name": "Create Coach",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/admin/coaches",
            "header": [{"key": "Authorization", "value": "Bearer {{adminToken}}"}, {"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"licensePlate\": \"30A-99999\",\n  \"type\": \"VIP\",\n  \"totalSeats\": 36,\n  \"description\": \"Xe giường nằm cao cấp\"\n}"
            }
          }
        },
        {
          "name": "Delete Coach",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrl}}/admin/coaches/5",
            "header": [{"key": "Authorization", "value": "Bearer {{adminToken}}"}]
          }
        }
      ]
    },
    {
      "name": "11. Admin - Trips",
      "item": [
        {
          "name": "Get All Trips",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/admin/trips",
            "header": [{"key": "Authorization", "value": "Bearer {{adminToken}}"}]
          }
        },
        {
          "name": "Create Trip",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/admin/trips",
            "header": [{"key": "Authorization", "value": "Bearer {{adminToken}}"}, {"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"routeId\": 1,\n  \"coachId\": 1,\n  \"departureTime\": \"2024-12-20T08:00:00\",\n  \"arrivalTime\": \"2024-12-20T20:00:00\",\n  \"price\": 550000\n}"
            }
          }
        },
        {
          "name": "Update Trip Status",
          "request": {
            "method": "PATCH",
            "url": "{{baseUrl}}/admin/trips/1/status",
            "header": [{"key": "Authorization", "value": "Bearer {{adminToken}}"}, {"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"IN_PROGRESS\"\n}"
            }
          }
        }
      ]
    }
  ]
}
